<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>ChemLog – Lifeguard Trainings</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- (Optional) Leave this if you have a global stylesheet; otherwise it won’t hurt -->
  <link rel="stylesheet" href="styles.css" />

  <!-- Training‑page specific styling that matches the main ChemLog theme -->
  <link rel="stylesheet" href="training.css" />
</head>
<body>
  <!-- Header: red ChemLog band with Supervisor Login -->
  <header class="app-header">
    <div class="training-header-left">
      <h1 class="app-title">In-Service Sign-Up</h1>
      <p>Capital City Aquatics</p>
    </div>
    <div class="menu-container">
        <button class="menu-btn" onclick="toggleMenu(this)">
            <span>≡</span>
            <span>Menu</span>
        </button>
        <div class="dropdown-menu" id="dropdownMenu">
            <a href="#" class="dropdown-item logout" onclick="logout(); return false;">ChemLog</a>
        </div>
    </div>
    <div class="training-header-right">
      <button class="supervisor-login-btn" id="openTrainingLoginBtn">
        Supervisor Login
      </button>
    </div>
  </header>

  <main class="training-main">
    <!-- Lifeguard signup form -->
    <section class="card training-card">
      <h2>Lifeguard Training Signup</h2>
      <p class="card-subtitle">
        Choose a monthly in‑service training that works for your schedule.
      </p>

      <form id="trainingSignupForm">
        <div class="form-row">
          <div class="form-group">
            <label for="guardName">Name</label>
            <input type="text" id="guardName" name="guardName" required />
          </div>
          <div class="form-group">
            <label for="guardEmail">Email</label>
            <input type="email" id="guardEmail" name="guardEmail" required />
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="guardPool">Home Pool / Location</label>
            <input
              type="text"
              id="guardPool"
              name="guardPool"
              placeholder="e.g., Rockbridge"
              required
            />
          </div>
          <div class="form-group">
            <label for="trainingMonth">Training Month</label>
            <select id="trainingMonth" name="trainingMonth" required>
              <option value="">Select month</option>
              <option value="may">May Training</option>
              <option value="june">June Training</option>
              <option value="july">July Training</option>
            </select>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group full-width">
            <label for="trainingSession">Training Date &amp; Location</label>
            <select id="trainingSession" name="trainingSession" required>
              <option value="">Select a month first</option>
              <!-- Options populated by training.js based on supervisor config -->
            </select>
            <small class="help-text">
              Sessions are set by your supervisor. Make sure you pick the correct pool/area.
            </small>
          </div>
        </div>

        <button type="submit" class="submit-btn">Submit Signup</button>
        <p class="form-message" id="signupMessage"></p>
      </form>
    </section>

    <!-- Supervisor configuration panel, styled like Settings → Schedule Trainings -->
    <section class="card training-card" id="trainingAdminPanel">
      <h2>Supervisor Training Setup</h2>
      <p class="card-subtitle">
        Create, edit, and track the in‑service training sessions that appear in the signup form above.
      </p>

      <div class="settings-section" id="scheduleTrainingsSection">
        <h3>Schedule Trainings</h3>
        <p>
          Use this panel to build your May, June, and July in‑service calendar. Capacity and sign‑ups
          are tracked for each session.
        </p>

        <!-- Date + Time -->
        <div class="form-row">
          <div class="form-group">
            <label for="trainingDateInput">Date</label>
            <input type="date" id="trainingDateInput" />
          </div>
          <div class="form-group">
            <label for="trainingTimeSelect">Time</label>
            <select id="trainingTimeSelect">
              <option value="">Select time</option>
              <!-- options populated by training.js -->
            </select>
          </div>
        </div>

        <!-- Location + Address -->
        <div class="form-row">
          <div class="form-group">
            <label for="trainingPoolSelect">Location (Pool)</label>
            <select id="trainingPoolSelect">
              <option value="">Select pool</option>
              <!-- you can add static options here or populate via JS -->
            </select>
          </div>

          <div class="form-group">
            <label for="trainingAddressInput">Address</label>
            <input
              type="text"
              id="trainingAddressInput"
              placeholder="Street, city, state"
            />
          </div>
        </div>

        <!-- Capacity + spots -->
        <div class="form-row">
          <div class="form-group">
            <label for="trainingCapacityInput">Capacity</label>
            <input
              type="number"
              id="trainingCapacityInput"
              min="1"
              step="1"
              placeholder="e.g. 20"
            />
          </div>
          <div class="form-group">
            <label>Spots</label>
            <p id="trainingCapacityInfo">
              Spots used / remaining will appear after you save this session.
            </p>
          </div>
        </div>

        <!-- Notes -->
        <div class="form-group full-width">
          <label for="trainingNotesInput">Notes</label>
          <textarea
            id="trainingNotesInput"
            rows="3"
          ></textarea>
        </div>

        <input type="hidden" id="trainingSessionId" />

        <button type="button" id="saveTrainingSessionBtn" class="submit-btn">
          Save Training Session
        </button>

        <h4 style="margin-top: 20px;">Scheduled Sessions</h4>

        <!-- May table -->
        <div class="training-month-group">
          <h5>May In‑Service</h5>
          <table class="sanitation-table training-schedule-table">
            <thead>
              <tr>
                <th>Date</th>
                <th>Time</th>
                <th>Location</th>
                <th>Capacity / Taken</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="trainingSessionsMayBody">
              <!-- filled by training.js -->
            </tbody>
          </table>
        </div>

        <!-- June table -->
        <div class="training-month-group">
          <h5>June In‑Service</h5>
          <table class="sanitation-table training-schedule-table">
            <thead>
              <tr>
                <th>Date</th>
                <th>Time</th>
                <th>Location</th>
                <th>Capacity / Taken</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="trainingSessionsJuneBody">
              <!-- filled by training.js -->
            </tbody>
          </table>
        </div>

        <!-- July table -->
        <div class="training-month-group">
          <h5>July In‑Service</h5>
          <table class="sanitation-table training-schedule-table">
            <thead>
              <tr>
                <th>Date</th>
                <th>Time</th>
                <th>Location</th>
                <th>Capacity / Taken</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="trainingSessionsJulyBody">
              <!-- filled by training.js -->
            </tbody>
          </table>
        </div>
      </div>

      <p class="form-message" id="adminMessage"></p>
    </section>
  </main>

  <!-- Supervisor login modal (training-specific) -->
  <div class="modal" id="trainingLoginModal">
    <div class="modal-content training-modal-content">
      <span class="close" id="closeTrainingLoginModal">&times;</span>
      <h2>Supervisor Login</h2>
      <form id="trainingLoginForm">
        <div class="form-group">
          <label for="trainingUsername">Username</label>
          <input type="text" id="trainingUsername" required />
        </div>
        <div class="form-group">
          <label for="trainingPassword">Passcode</label>
          <input type="password" id="trainingPassword" required />
        </div>
        <button type="submit" class="submit-btn">Login</button>
        <p class="form-message" id="trainingLoginMessage"></p>
      </form>
    </div>
  </div>

  <script src="training.js" type="module"></script>
  <script src="script.js" type="module"></script>
</body>
</html>
