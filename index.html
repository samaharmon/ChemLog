<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hourly Pool Chemistry Log - Capital City Aquatics</title>
    <link rel="stylesheet" href="style.css">
    <script src="script.js" defer></script>
</head>
<body>
    <!-- Success/Error Messages -->
    <div id="successMessage" class="success-message"></div>
    <div id="errorMessage" class="error-message"></div>

    <!-- Main Form -->
    <div id="mainForm">
        <div class="header">
            <h1>Hourly Pool Chemistry Log</h1>
            <p>Capital City Aquatics</p>
            <button class="supervisor-login-btn" onclick="openLoginModal()">Supervisor Login</button>
        </div>

        <div class="container">
            <div class="form-container">
                <!-- Respondent Information -->
                <div class="section">
                    <h2>Respondent Information</h2>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="firstName">First Name</label>
                            <input type="text" id="firstName" name="firstName" placeholder="Type here" required>
                        </div>
                        <div class="form-group">
                            <label for="lastName">Last Name</label>
                            <input type="text" id="lastName" name="lastName" placeholder="Type here" required>
                        </div>
                    </div>
                    <div class="form-group full-width">
                        <label for="poolLocation">Which pool are you recording data for?</label>
                        <select id="poolLocation" name="poolLocation" required onchange="handlePoolLocationChange()">
                            <option value="">Click to select from drop down</option>
                            <option value="Camden CC">Camden CC</option>
                            <option value="Columbia CC">Columbia CC</option>
                            <option value="Forest Lake">Forest Lake</option>
                            <option value="CC of Lexington">CC of Lexington</option>
                            <option value="Quail Hollow">Quail Hollow</option>
                            <option value="Rockbridge">Rockbridge</option>
                            <option value="Wildewood">Wildewood</option>
                            <option value="Winchester">Winchester</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="form-container">
                <!-- Chemistry Log -->
                <div class="section">
                    <h2>Chemistry Log</h2>
                    
                    <!-- Main Pool Section -->
                    <div class="pool-section">
                        <h3>Main Pool</h3>
                        <div class="pool-section-content">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="mainPoolPH">What is the Main Pool pH?</label>
                                    <select id="mainPoolPH" name="mainPoolPH" required>
                                        <option value="">Click to select from drop down</option>
                                        <option value="< 7.0">< 7.0</option>
                                        <option value="7.0">7.0</option>
                                        <option value="7.2">7.2</option>
                                        <option value="7.4">7.4</option>
                                        <option value="7.6">7.6</option>
                                        <option value="7.8">7.8</option>
                                        <option value="8.0">8.0</option>
                                        <option value="> 8.0">> 8.0</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="mainPoolCl">What is the Main Pool Cl level?</label>
                                    <select id="mainPoolCl" name="mainPoolCl" required>
                                        <option value="">Click to select from drop down</option>
                                        <option value="0">0</option>
                                        <option value="1">1</option>
                                        <option value="2">2</option>
                                        <option value="3">3</option>
                                        <option value="5">5</option>
                                        <option value="7.5">7.5</option>
                                        <option value="10">10</option>
                                        <option value="> 10">> 10</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Secondary Pool Section -->
                    <div class="pool-section" id="secondaryPoolSection">
                        <h3>Secondary Pool</h3>
                        <div class="pool-section-content">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="secondaryPoolPH">What is the Secondary Pool pH?</label>
                                    <select id="secondaryPoolPH" name="secondaryPoolPH" required>
                                        <option value="">Click to select from drop down</option>
                                        <option value="< 7.0">< 7.0</option>
                                        <option value="7.0">7.0</option>
                                        <option value="7.2">7.2</option>
                                        <option value="7.4">7.4</option>
                                        <option value="7.6">7.6</option>
                                        <option value="7.8">7.8</option>
                                        <option value="8.0">8.0</option>
                                        <option value="> 8.0">> 8.0</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="secondaryPoolCl">What is the Secondary Pool Cl level?</label>
                                    <select id="secondaryPoolCl" name="secondaryPoolCl" required>
                                        <option value="">Click to select from drop down</option>
                                        <option value="0">0</option>
                                        <option value="1">1</option>
                                        <option value="2">2</option>
                                        <option value="3">3</option>
                                        <option value="5">5</option>
                                        <option value="7.5">7.5</option>
                                        <option value="10">10</option>
                                        <option value="> 10">> 10</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>

                    <button type="submit" class="submit-btn" onclick="submitForm()">Submit Chemistry Log</button>
                </div>
            </div>
        </div>

        <div class="footer">
            <em>Developed by Sam Harmon | 2025<br>
            v2.1</em>
        </div>
    </div>

    <!-- Supervisor Login Modal -->
    <div id="loginModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Supervisor Login</h2>
                <span class="close" onclick="closeLoginModal()">&times;</span>
            </div>
            <form id="loginForm" class="modal-form">
                <div class="form-group">
                    <label for="email">Username</label>
                    <input type="text" id="email" name="email" required>
                </div>
                <div class="form-group">
                    <label for="password">Password</label>
                    <input type="password" id="password" name="password" required>
                </div>
                <button type="submit" class="login-btn">Login</button>
            </form>
        </div>
    </div>

    <!-- Supervisor Dashboard -->
    <div id="supervisorDashboard" class="dashboard">
        <div class="header">
            <div class="dashboard-header">
                <div>
                    <h1>Pool Chemistry Dashboard</h1>
                    <p>Capital City Aquatics</p>
                </div>
                <button class="logout-btn" onclick="logout()">Logout</button>
            </div>
        </div>

        <div class="container" style="max-width: calc(100vw - 100px);">
            <div class="dashboard-controls">
                <button class="export-btn" onclick="exportToCSV()">Export to CSV</button>
                <div class="form-group" style="flex: none; width: 200px;">
                    <label for="poolFilter">Filter by Pool:</label>
                    <select id="poolFilter" onchange="filterData()">
                        <option value="">All Pools</option>
                        <option value="Camden CC">Camden CC</option>
                        <option value="Columbia CC">Columbia CC</option>
                        <option value="Forest Lake">Forest Lake</option>
                        <option value="CC of Lexington">CC of Lexington</option>
                        <option value="Quail Hollow">Quail Hollow</option>
                        <option value="Rockbridge">Rockbridge</option>
                        <option value="Wildewood">Wildewood</option>
                        <option value="Winchester">Winchester</option>
                    </select>
                </div>
                <div class="form-group" style="flex: none; width: 50px">
                    <label for="dateFilter">Date:</label>
                    <input type="date" id="dateFilter" onchange="filterData()">
                </div>
            </div>

            <table class="data-table" id="dataTable">
                <thead>
                    <tr>
                        <th>Timestamp</th>
                        <th>Name</th>
                        <th>Pool Location</th>
                        <th>Main pH</th>
                        <th>Main Cl</th>
                        <th>Secondary pH</th>
                        <th>Secondary Cl</th>
                    </tr>
                </thead>
                <tbody id="dataTableBody">
                </tbody>
            </table>
        </div>
    </div>

<!-- Feedback Modal -->
<div id="feedbackModal" style="display: none; position: fixed; top: 20%; left: 50%; transform: translateX(-50%); z-index: 9999; padding: 20px; border-radius: 10px; box-shadow: 0 0 10px rgba(0,0,0,0.3); max-width: 400px; text-align: center;">
    <div id="modalContent" style="white-space: pre-wrap; font-size: 16px;"></div>
    <button onclick="closeModal()" style="margin-top: 15px; padding: 5px 15px; font-weight: bold;">X</button>
</div>
</body>
</html>
